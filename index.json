[{"categories":["draft"],"content":"SEIS_FILO : 基于McMC(马尔可夫链蒙特卡洛)跨维贝叶斯方法联合反演面波频散和接收函数 ","date":"2022-12-08","objectID":"/posts/2022-12-08-seisfil/2022-12-03-seisfilo-manual-zh/:0:0","tags":["draft"],"title":"SEIS_FILO中文手册","uri":"/posts/2022-12-08-seisfil/2022-12-03-seisfilo-manual-zh/"},{"categories":["draft"],"content":"一、BEFORE USE ","date":"2022-12-08","objectID":"/posts/2022-12-08-seisfil/2022-12-03-seisfilo-manual-zh/:1:0","tags":["draft"],"title":"SEIS_FILO中文手册","uri":"/posts/2022-12-08-seisfil/2022-12-03-seisfilo-manual-zh/"},{"categories":["draft"],"content":"Overview 地震学研究利用平面和各向同性层的分层来近似地描述地球的结构。这种一维模型适用于单站测量，包括接收函数和面波频散曲线，已被广泛应用于从浅盆地到深部地幔结构的广泛范围。近年来，越来越多的研究开始使用更复杂的方法(如全波形反演)来模拟地球横向非均匀结构。然而，由于计算成本较低，且不需要密集的地震仪器部署，一维结构建模将继续保持其地位。特别是在海洋区域，由于台站网络覆盖不足，只能采用单台站的方法。 该程序包旨在对接收函数和面波频散曲线进行跨维反演，充分考虑海水柱的影响。最先进的贝叶斯概率抽样被称为可逆跳跃马尔可夫链蒙特卡洛，其中模型参数的数量(即层数)是根据数据复杂性自动选择的。同时还采用了平行回火技术来提高转化率。源代码是用现代的Fortran编程风格(即面向目标的编程)编写的，将来维护成本低且易于扩展。 ","date":"2022-12-08","objectID":"/posts/2022-12-08-seisfil/2022-12-03-seisfilo-manual-zh/:1:1","tags":["draft"],"title":"SEIS_FILO中文手册","uri":"/posts/2022-12-08-seisfil/2022-12-03-seisfilo-manual-zh/"},{"categories":["draft"],"content":"Requirements 必须安装以下库 FFTW library LAPACK library 上述库的适当位置必须在src/Makefile中指定 Open MPI MPI编译器必须链接到GNU Fortran编译器(即gfortran)。这些程序已被确认可以使用GNU Fortran编译器4.8.5版本工作。旧版本可能无法编译程序，因为代码包含了现代Fortran特性。 Plot实用程序需要Python3和流行的模块，包括numpy、matplotlib、pandas和seaborn。有关所需模块的完整列表，请参阅requirements.txt。 ","date":"2022-12-08","objectID":"/posts/2022-12-08-seisfil/2022-12-03-seisfilo-manual-zh/:1:2","tags":["draft"],"title":"SEIS_FILO中文手册","uri":"/posts/2022-12-08-seisfil/2022-12-03-seisfilo-manual-zh/"},{"categories":["draft"],"content":"Install Use make in the src directory. Executable files will be created under the bin directory. mpifort is required. It is recommended that mpifort is liked to the GNU compiler (i.e., gfortran). Otherwise, some modifications to compiler options are required in src/Makefile. ","date":"2022-12-08","objectID":"/posts/2022-12-08-seisfil/2022-12-03-seisfilo-manual-zh/:1:3","tags":["draft"],"title":"SEIS_FILO中文手册","uri":"/posts/2022-12-08-seisfil/2022-12-03-seisfilo-manual-zh/"},{"categories":["draft"],"content":"Terms of use Please clarify the URL of the GitHub repository (https://github.com/akuhara/SEIS_FILO) and the package name (SEIS_FILO) when you make any presentation or publish articles using this program. The example sentence is: This study uses a computer program SEIS_FILO, which is available at https://github.com/akuhara/SEIS_FILO. This program is licensed under the GNU General Public License v3.0. ","date":"2022-12-08","objectID":"/posts/2022-12-08-seisfil/2022-12-03-seisfilo-manual-zh/:1:4","tags":["draft"],"title":"SEIS_FILO中文手册","uri":"/posts/2022-12-08-seisfil/2022-12-03-seisfilo-manual-zh/"},{"categories":["draft"],"content":"二、HOW TO USE ","date":"2022-12-08","objectID":"/posts/2022-12-08-seisfil/2022-12-03-seisfilo-manual-zh/:2:0","tags":["draft"],"title":"SEIS_FILO中文手册","uri":"/posts/2022-12-08-seisfil/2022-12-03-seisfilo-manual-zh/"},{"categories":["draft"],"content":"1 Input files 1.1 Overview of input files Input files to SEIS_FILO’s programs are categorized into three classes: (1) main parameter file, (2) data summary file, and (3) data file. The first one, the main parameter file, is a mandatory input to all programs (i.e., recv_func_fwd, disper_fwd, and joint_inv) and the filename must be provided as the first command-line argument. The user’s choice of tuning parameters should be stated in this file. The other ones, the data summary file and the data file, are only required for inversion (i.e., joint_inv). The data summary file contains metadata of the input dataset and must be prepared separately for each receiver function and surface wave datasets. The filenames are passed to the program through the parameters recv_func_in and disper_in, which should appear in the main file. The data files store the input data. The filenames should appear in the data summary file. 1.2 Main parameter file The main parameter file contains user’s choice on tuning parameters. This filename must be passed to SEIS_FILO’s programs as the first command-line argument. See parameter list for descriptions of each parameter. EXAMPLE recv_func_fwd [path to parameter file] disper_fwd [path to parameter file] mpirun -np 20 joint_inv [path to parameter file] Format Specify one parameter per line Parameter’s name should be on the left side of “=” and the value on the right side Comment out by “#” Order insensitive Empty lines are just ignored # Snippet of the parameter file n_iter = 100000 n_chain = 20 # The following lines give the same results. n_burn = 50000 n_ bu rn= 500 0 0 Required parameters for disper_fwd freq_or_period: dispersion measurement type (freq: dispersion curve as a function of frequency; period: as a function of period) xmin: minimum frequecny or period of dispersion curve (Hz or s) xmax: maximum frequency or period of dispersion curve (Hz or s) dx: freqeuncy or period interval of dispersion curve (Hz or s) cmin: minimum phase velocity for root search (km/s) cmax: maximum phase velocity for root search (km/s) dc: inverval of phase velocity (km/s) disper_phase: phase type (R: Rayleigh, L: Love) n_mode: mode number (n_mode \u003e= 0) vmod_in: filename for input velocity model disper_out: output filename NOTE disper_phase = L (Love wave) is nut supported for current version. When n_mode \u003c 0, full search mode is acctivated Required parameters for recv_func_fwd n_smp: number of samples in receiver function data delta: time interval of receiver function (s) rayp: ray parameter (s/km) a_gauss: Gaussian low-pass filter parameter t_pre: time before direct P arrival in receiver function (s) rf_phase: phase type (P: P-wave, S: S-wave) deconv_flag: whether deconvolved by Z component or not (T: with deconvolution, F: without deconvolution) correct_amp: amplitude correction to account for energy loss by filtering (T: with correction, F: without correction) damp: water-level damping factor vmod_in: filename for input velocity model recv_func_out: output filename Required parameters for joint_inv recv_func_in : filename of receiver function data summary file disper_in: filename of dispersion curve data summary file solve_anomaly: solve for velocity anomaly (T) or aboslute velocity (F) ref_vmod_in: Filename of reference velocity model solve_vp: whether solve for Vp (T: solve Vp, F: not) solve_rf_sig: whether solve receiver function data error (T) or not (F) solve_disper_sig: whether solve dispersion curve data error (T) or not (F) is_sphere: Earth flattening is applied (T) or not (F). is_ocean: whether model includes ocean (T: with ocean layer, F: without ocean layer) ocean_thick: ocean layer thickness (only required when is_ocean=T) vp_bottom: Vp of bottom layer (km/s). vs_bottom: Vs of bottom layer (km/s). rho_bottom: Density of bottom layer (g/cm^3). n_iter: number of iterations n_burn: number of iterations for burn-in period n_corr: number of iterations each time before saving a model n_chain: number of MCMC chain","date":"2022-12-08","objectID":"/posts/2022-12-08-seisfil/2022-12-03-seisfilo-manual-zh/:2:1","tags":["draft"],"title":"SEIS_FILO中文手册","uri":"/posts/2022-12-08-seisfil/2022-12-03-seisfilo-manual-zh/"},{"categories":["draft"],"content":"2 Output files 2.1 Number of layers Filename: n_layers.ppd Format: 1st column 2nd column Number of layers Probability 2.2 Velocity profile Filename: vs_z.ppd Format: 1st column 2nd column 3rd column S wave velocity (km/s) Depth (km) Probability Filename: vp_z.ppd Format: 1st column 2nd column 3rd column P wave velocity (km/s) Depth (km) Probability Filename: vs_z.mean Format: 1st column 2nd column Mean S wave velocity (km/s) Depth (km) Filename: vp_z.mean Format: 1st column 2nd column Mean P wave velocity (km/s) Depth (km) 2.3 Dispersion Curve Ensemble 2.4 Receiver function ensemble 2.5 Standard deviation of noise ","date":"2022-12-08","objectID":"/posts/2022-12-08-seisfil/2022-12-03-seisfilo-manual-zh/:2:2","tags":["draft"],"title":"SEIS_FILO中文手册","uri":"/posts/2022-12-08-seisfil/2022-12-03-seisfilo-manual-zh/"},{"categories":["draft"],"content":"3 Plot utilitites ","date":"2022-12-08","objectID":"/posts/2022-12-08-seisfil/2022-12-03-seisfilo-manual-zh/:2:3","tags":["draft"],"title":"SEIS_FILO中文手册","uri":"/posts/2022-12-08-seisfil/2022-12-03-seisfilo-manual-zh/"},{"categories":["draft"],"content":"4 Forwarad calculation 4.1 Dispersion curve 4.2 Receiver functions ","date":"2022-12-08","objectID":"/posts/2022-12-08-seisfil/2022-12-03-seisfilo-manual-zh/:2:4","tags":["draft"],"title":"SEIS_FILO中文手册","uri":"/posts/2022-12-08-seisfil/2022-12-03-seisfilo-manual-zh/"},{"categories":["draft"],"content":"5 Inversion analysis 5.1 Model parameters 5.2 Prior porbability 5.3 McMC step 5.4 Prallel tempering ","date":"2022-12-08","objectID":"/posts/2022-12-08-seisfil/2022-12-03-seisfilo-manual-zh/:2:5","tags":["draft"],"title":"SEIS_FILO中文手册","uri":"/posts/2022-12-08-seisfil/2022-12-03-seisfilo-manual-zh/"},{"categories":["draft"],"content":"6 Miscellaneous 6.1 Receiver function amplitude 6.2 Verification 6.3 Spherical Earth mode 6.4 Diagnostic mode","date":"2022-12-08","objectID":"/posts/2022-12-08-seisfil/2022-12-03-seisfilo-manual-zh/:2:6","tags":["draft"],"title":"SEIS_FILO中文手册","uri":"/posts/2022-12-08-seisfil/2022-12-03-seisfilo-manual-zh/"},{"categories":["draft"],"content":"BayHunter : 基于McMC(马尔可夫链蒙特卡洛)跨维贝叶斯方法联合反演面波频散和接收函数 ","date":"2022-12-03","objectID":"/posts/2022-12-03-bayhunter/2022-12-03-bayhunter-manual-zh/:0:0","tags":["draft"],"title":"BayHunter中文手册","uri":"/posts/2022-12-03-bayhunter/2022-12-03-bayhunter-manual-zh/"},{"categories":["draft"],"content":"1）Overview 概览 ","date":"2022-12-03","objectID":"/posts/2022-12-03-bayhunter/2022-12-03-bayhunter-manual-zh/:1:0","tags":["draft"],"title":"BayHunter中文手册","uri":"/posts/2022-12-03-bayhunter/2022-12-03-bayhunter-manual-zh/"},{"categories":["draft"],"content":"摘要 BayHunter 是一个基于Python语言对面波频散和/或接收函数进行马尔可夫链蒙特卡洛(McMC)跨维贝叶斯反演的开源工具。该算法遵循数据驱动的策略并解决速度-深度结构、模型层数、$V_P/V_S$比及噪声参数(例如数据噪声互相关及振幅)。程序包中同样提供了正演模拟代码，但很容易用自己的代码替换。程序包还可以添加其他(完全不同的)数据集(如ZH比?)。 BayWatch 模块可用于在反演过程中实时观察反演运行过程(如下面动画所展示)。这使得我们很容易看到每个链(chain)是如何搜索参数空间、数据是如何拟合、模型是如何变化、以及反演的方向是什么。 Available on GitHub: https://github.com/jenndrei/BayHunter ","date":"2022-12-03","objectID":"/posts/2022-12-03-bayhunter/2022-12-03-bayhunter-manual-zh/:1:1","tags":["draft"],"title":"BayHunter中文手册","uri":"/posts/2022-12-03-bayhunter/2022-12-03-bayhunter-manual-zh/"},{"categories":["draft"],"content":"引用 Dreiling, J., Tilmann, F. BayHunter – McMC transdimensional Bayesian inversion of receiver functions and surface wave dispersion. GFZ Data Services, 2019. https://doi.org/10.5880/GFZ.2.4.2019.001. ","date":"2022-12-03","objectID":"/posts/2022-12-03-bayhunter/2022-12-03-bayhunter-manual-zh/:1:2","tags":["draft"],"title":"BayHunter中文手册","uri":"/posts/2022-12-03-bayhunter/2022-12-03-bayhunter-manual-zh/"},{"categories":["draft"],"content":"应用实例 Dreiling et al., 2020: Crustal structure of Sri Lanka derived from joint inversion of surface wave dispersion and receiver functions using a Bayesian approach. Journal of Geophysical Research: Solid Earth. https://doi.org/10.1029/2019JB018688. Green et al., 2020: Magmatic and sedimentary structure beneath the Klyuchevskoy Volcanic Group, Kamchatka, from ambient noise tomography. Journal of Geophysical Research: Solid Earth. https://doi.org/10.1029/2019JB018900. Mauerberger et al., n.a.: The multifaceted Scandinavian lithosphere imaged by surface waves and ambient noise. In preparation. ","date":"2022-12-03","objectID":"/posts/2022-12-03-bayhunter/2022-12-03-bayhunter-manual-zh/:1:3","tags":["draft"],"title":"BayHunter中文手册","uri":"/posts/2022-12-03-bayhunter/2022-12-03-bayhunter-manual-zh/"},{"categories":["draft"],"content":"文档 BayHunter的文档包含三章，可通过导航菜单访问，并可下载为PDF格式. 引言: 贝叶斯理论、McMC反演方法 算法: BayHunter背后的Python框架，包括优化器和链模块，保存和绘图选项，以及Baywatch 教程: 设置和运行反演，目标和参数，使用合成数据的反演实例(附录中代码的最简工作示例) ","date":"2022-12-03","objectID":"/posts/2022-12-03-bayhunter/2022-12-03-bayhunter-manual-zh/:1:4","tags":["draft"],"title":"BayHunter中文手册","uri":"/posts/2022-12-03-bayhunter/2022-12-03-bayhunter-manual-zh/"},{"categories":["draft"],"content":"Comments and Feedback BayHunter is ready to use. It is quick and efficient and I am happy with the performance. Still, there are always things that can be improved to make it even faster and more efficient, and user friendlier. Although we tested the software with a variety of synthetic and real data, each data set is still unique and shows own characteristics. If you observe any unforeseen behavior, please share it with me to wipe out(消除) possible problems we haven’t considered. I am happy to share my experience with you and also if you share your thoughts with me. I am looking forward to your feedback. ","date":"2022-12-03","objectID":"/posts/2022-12-03-bayhunter/2022-12-03-bayhunter-manual-zh/:1:5","tags":["draft"],"title":"BayHunter中文手册","uri":"/posts/2022-12-03-bayhunter/2022-12-03-bayhunter-manual-zh/"},{"categories":["draft"],"content":"2）Quickstart 快速开始 ","date":"2022-12-03","objectID":"/posts/2022-12-03-bayhunter/2022-12-03-bayhunter-manual-zh/:2:0","tags":["draft"],"title":"BayHunter中文手册","uri":"/posts/2022-12-03-bayhunter/2022-12-03-bayhunter-manual-zh/"},{"categories":["draft"],"content":"Requirements(建议版本) numpy\u003e=1.21.6 scipy==1.7.3 matplotlib==3.5.3 pypdf2==2.11.1 configobj==5.0.6 pyzmq==24.0.1 cython==0.29.32 ","date":"2022-12-03","objectID":"/posts/2022-12-03-bayhunter/2022-12-03-bayhunter-manual-zh/:2:1","tags":["draft"],"title":"BayHunter中文手册","uri":"/posts/2022-12-03-bayhunter/2022-12-03-bayhunter-manual-zh/"},{"categories":["draft"],"content":"Modify 由于Github上BayHunter源码是基于python2开发的，而Python2已经停止更新，因此很有必要将代码更新为Python3版本，所以需要以下一些修改 1.Numpy版本问题 BayHunter/src/Plotting.py ## line 482 (modify) models2 = np.array([model[~np.isnan(model)] for model in models2],dtype=object) ## line 483/484 (modify) yinterf = np.array([np.cumsum(model[int(model.size/2):-1]) for model in models2],dtype=object) ## line 526 (modify) bins, lay_bin, _ = np.array(data,dtype=object).T ## line 612 (modify) models = np.array([model[~np.isnan(model)] for model in models],dtype=object) BayHunter/src/Models.py ## line 205 (modify) bins, vs_bin, dep_bin = np.array(data,dtype=object).T 2.python编码中使用 dict.keys() 时，会报 TypeError: ‘dict_keys’ object is not subscriptable 的错误 BayHunter/src/rfmini_modrf.py ## line 75 pars = mparams.keys() ## line 76(add) pars = list(pars) #!20210621 3.语句缺少 BayHunter/tutorial/create_testdata.py ## line 2 (add) import os ...... ...... ## line 20 path = 'observed' ## line 21 (add) os.makedirs(path,exist_ok=True) 4.Python2改为Python3 BayHunter/tutorial/tutorial.py ## line 80 (modify) print(truenoise, explike) ","date":"2022-12-03","objectID":"/posts/2022-12-03-bayhunter/2022-12-03-bayhunter-manual-zh/:2:2","tags":["draft"],"title":"BayHunter中文手册","uri":"/posts/2022-12-03-bayhunter/2022-12-03-bayhunter-manual-zh/"},{"categories":["draft"],"content":"Installation # 1.下载BayHunter源码 git clone https://github.com/jenndrei/BayHunter.git # 2.创建虚拟环境 cd BayHunter ## Create a new conda environment conda create -n bh37 python=3.7 # 3.激活虚拟环境并安装依赖包 ## source activate bh2 conda activate bh37 ## install packages (建议版本) conda install numpy==1.21.6 scipy==1.7.3 matplotlib==3.5.3 pypdf2==2.11.1 configobj==5.0.6 pyzmq==24.0.1 cython==0.29.32 ## or conda install numpy scipy matplotlib pypdf2 configobj pyzmq cython # 3.安装BayHunter ## Bayhunter installation (in the BayHunter repository) python setup.py install # 4.测试是否安装成功 ## Check the successful installation of the surf96 routine python bayhunter_test_surf96.py ## 5.联合反演实例 ### 5.1 生成测试数据 python create_testdata.py ### 5.2 载入RF python estimate_rRF.py ### 5.3 联合反演 python tutorialhunt.py ### 5.4 同时开启Baywatch模块 conda activate bh37 baywacth . ","date":"2022-12-03","objectID":"/posts/2022-12-03-bayhunter/2022-12-03-bayhunter-manual-zh/:2:3","tags":["draft"],"title":"BayHunter中文手册","uri":"/posts/2022-12-03-bayhunter/2022-12-03-bayhunter-manual-zh/"},{"categories":["draft"],"content":"Resources 算法: 基于Bodin et al., 2012的工作 面波频散正演模拟: SURF96源于CPS330(Herrmann and Ammon, 2002). 使用Python包装器 pysurf96 及 SurfTomo. 接收函数正演模拟: rfmini (Joachim Saul, GFZ). ","date":"2022-12-03","objectID":"/posts/2022-12-03-bayhunter/2022-12-03-bayhunter-manual-zh/:2:4","tags":["draft"],"title":"BayHunter中文手册","uri":"/posts/2022-12-03-bayhunter/2022-12-03-bayhunter-manual-zh/"},{"categories":["draft"],"content":"一、引言 贝叶斯反演近年来越来越受欢迎，与传统的优化方法相比，贝叶斯反演具有许多优点。其他方法往往约束更大，更倾向于基于最小失配的最佳模型，而贝叶斯定理后的反演基于模型的似然性，得到模型各参数的概率分布。反演结果由与数据和所选模型先验一致的模型集合(后验分布)表示。它们对解空间进行成像，揭示了模型参数的不确定性和权衡。 利用马尔可夫链蒙特卡罗(McMC)采样算法进行贝叶斯后SWD和RF联合反演，并求解速度-深度结构、层数、噪声参数和平均地壳 $V_P/V_S$ 比，目前还没有合适的开源工具。所以处理这个问题是很自然的。为此，我们开发了BayHunter和BayWatch模块，该模块允许在运行时直播反转。 ","date":"2022-12-03","objectID":"/posts/2022-12-03-bayhunter/2022-12-03-bayhunter-manual-zh/:3:0","tags":["draft"],"title":"BayHunter中文手册","uri":"/posts/2022-12-03-bayhunter/2022-12-03-bayhunter-manual-zh/"},{"categories":["draft"],"content":"1.1 Bayes theorem 贝叶斯定理(Bayes, 1763)是基于条件逆概率之间的关系。假设观测数据𝑑𝑜𝑏𝑠，模型𝑚;我们观察到的概率𝑑𝑜𝑏𝑠给定𝑚𝑝(𝑑𝑜𝑏𝑠|𝑚),和概率𝑚给定𝑑𝑜𝑏𝑠是𝑝(𝑚|𝑑𝑜𝑏𝑠)。这两种情况也依赖于𝑚或𝑑𝑜𝑏𝑠被给出的概率，即𝑝(𝑚)和𝑝(𝑑𝑜𝑏𝑠)。 两个事件发生的条件逆概率由:sss ","date":"2022-12-03","objectID":"/posts/2022-12-03-bayhunter/2022-12-03-bayhunter-manual-zh/:3:1","tags":["draft"],"title":"BayHunter中文手册","uri":"/posts/2022-12-03-bayhunter/2022-12-03-bayhunter-manual-zh/"},{"categories":["draft"],"content":"1.2 Markov chain Monte Carlo 马尔可夫链蒙特卡洛描述了一种从概率分布中采样的算法。该算法是随机抽样方法蒙特卡洛和马尔可夫链的结合，假设当前样本和前一个样本之间存在依赖关系。关于算法的具体实现，请参见算法部分。 ","date":"2022-12-03","objectID":"/posts/2022-12-03-bayhunter/2022-12-03-bayhunter-manual-zh/:3:2","tags":["draft"],"title":"BayHunter中文手册","uri":"/posts/2022-12-03-bayhunter/2022-12-03-bayhunter-manual-zh/"},{"categories":["draft"],"content":"二、算法 BayHunter 是一个对面波频散(SWD)和接收函数(RF)进行马尔可夫链蒙特卡洛(McMC)跨维贝叶斯反演的工具，其能解决模型的速度-深度结构、层数、噪声尺度参数(互相关、大小)及地壳平均$V_p/V_S$。反演算法使用多个独立的马尔可夫链及蒙特卡洛随机采样方法来寻找最有可能(最似然)的模型。 图3 一个McMC链对参数空间采样的工作流程示意图。后验分布包括经过一定次数迭代后的链的所有接受的模型 每个链在参数空间中是如何采样(发展)的如图3所示。每个链包含一个当前模型(current model)。在每次迭代中，通过考虑建议分布(proposal distribution)对当前模型进行修改，将提出一个新的模型(new model)。接受概率(acceptance probability)是基于从建议模型(proposal model)到当前模型(current model)的先验(prior)、建议(proposal)和后验(posterior)比计算的。提出的模型以接受概率(acceptance probability)被接受，即如果提出模型(proposed model)的可能性大于当前模型(current model)的可能性，则被接受;但也有一些比当前模型(current model)可能性小的模型以小概率被接受，这防止了链陷入局部极大值。如果建议模型(proposal model)被接受，它将取代当前模型(current model);如果不被接受，建议模型(proposal model)将被拒绝，当前模型(current model)将保持不变。此过程将重复进行指定次数的迭代。搜索阶段每个被接受模型(accepted model)都有助于参数的后验分布。 下面给出的方程被简化为 BayHunter 中所需要的方程的数量，并不会完全推导出来。有关数学推导和细节可参考Bodin(2010)和Bodin等人(2012)，他们启发了BayHunter的想法，我们的算法也基于此。 ","date":"2022-12-03","objectID":"/posts/2022-12-03-bayhunter/2022-12-03-bayhunter-manual-zh/:4:0","tags":["draft"],"title":"BayHunter中文手册","uri":"/posts/2022-12-03-bayhunter/2022-12-03-bayhunter-manual-zh/"},{"categories":["draft"],"content":"2.1 The Optimizer and Chain modules The BayHunter.mcmcOptimizer manages the chains in an overarching module. It starts each single chain’s inversion and schedules the parallel computing. Each chain and its complete model data can be accessed (in the Python environment) after the inversion has finished. Before the optimizer initializes the chains, a configuration file will automatically be saved, which simplifies the process of illustrating results after an inversion. BayHunter.mcmcOptimizer 在一个拱形模块中管理链。它启动每个单链的反演，并安排并行计算。在反演完成后，可以访问每个链及其完整的模型数据(在Python环境中)。在优化器初始化链之前，会自动保存一个配置文件，这简化了反演后显示结果的过程。 Each BayHunter.SingleChain explores the parameter space independently and collects samples by following Bayes theorem (Eq. (1)). A chain has multiple tasks, which are described below in detail and begin with the random initialization of a starting model. 每个BayHunter.SingleChain独立探索参数空间，并遵循贝叶斯定理(Eq.(1))收集样本。一个链有多个任务，下面将详细描述这些任务，并从一个启动模型的随机初始化开始。 2.1.1 Initialize the targets 实现反演的第一步是定义目标。因此，用户需要将观察到的数据传递给指定的BayHunter目标类型。 对于面波频散，周期-速度观测值必须分配给处理相应数据的类(rayleighdistribusionphase, rayleighdistribusiongroup, lovedistribusionphase, lovedistribusiongroup)。它们默认进入基本波浪模式。此外，不确定性可以归因，这稍后控制每个时期的权重。 对于接收函数，观测到的时间-振幅数据必须分配给BayHunter.Targets中的PReceiverFunction(或SReceiverFunction)类。如果默认值与用于接收函数计算的值不同，则应更新正演模拟的参数(高斯滤波器宽度、慢度、水准量、近地表速度)。 每个目标类都附带一个正演模拟插件，这很容易交换。对于面波，预先安装了一个基于SURF96 (Herrmann和Ammon, 2002)的快速Fortran例程。对于接收函数，预安装的例程基于rfmini (Joachim Saul, GFZ)。还可以定义其他目标。 2.1.2 Parametrization of the model (模型参数化) 模型包括速度-深度结构、观测数据噪声参数 速度-深度结构 数据噪声协方差矩阵 2.1.3 Initialize a model (模型初始化) 对于每个链，初始模型参数(起始模型)是从均匀先验分布中提取的。对于速度-深度结构，它们是VS、深度、层数和平均地壳VP/VS的分布。初始模型的层数等于相应先验分布的最小值。如果设置为0，将绘制一个半空间模型，如果设置为1，半空间模型上的一层表示初始模型，以此类推。初始层数决定了将绘制多少Voronoi核，也就是VS和深度有多少对。如果绘制了速度-深度模型，VP将根据VP/VS计算，VP/VS是迄今绘制的，或者是用户给出的常数。如果合适，用户可能希望选择一个特定于地幔的VP/VS，也假设一个VS来区分地幔和地壳。密度计算方法为𝜌=0.77+0.32𝑉𝑃(Berteussen, 1977)。 可以给出单个界面深度的估计(可以是任何界面，例如莫霍面)。估算值包括界面深度的平均值和标准差。当初始化一个模型时——只有给出了一个估计值——根据给定的正态分布绘制一个界面深度，两个核将被放置在与界面等距的位置。如果初始模型只包含半空间，则忽略接口估计。给出一个估计可以帮助链更快地收敛，例如，在计算能力有限的情况下，但可能会产生有偏差的后验分布。 每个目标有两个噪声尺度参数(𝑟，𝜎)。用户需要定义总体目标类型(overarching target type)的先验分布，即SWD和RF，然而，每个目标将采样自己的后验分布。在反演过程中，单个噪声参数也可以通过给出单个数字而不是一个范围来设置为常数。初始值是给定的数字，并且/或将从先前的范围中提取。 绘制的初始模型自动被分配为链的当前模型。计算相应的似然。此模型也是为burn-in阶段收集的模型链中的第一个模型。 2.1.4 Computation of model likelihood (模型似然计算) 似然(likelihood)是对在 特定模型𝑚 下观测到 测量数据(d) 的概率的估计。它是接受和拒绝提议模型(proposal models)的重要手段。似然函数为: $$p(d_{obs}|m)=\\frac{1}{\\sqrt{(2\\pi)(|C_{e}|)}}\\times exp{\\frac{-\\Phi(m)}{2}}\\tag{5}$$ 其中$\\Phi(m)$为马氏距离(Mahalanobis distance)(Mahalanobis, 1936)，即观测数据$d_{obs}$和估计数据矢量$g(m)$之间的多维距离: $$\\Phi(m)=(g(m)-d_{obs})^{T} C_{e}^{-1}(g(m)-d_{obs})\\tag{6}$$ 考虑到似然值通常数值很小，偏向于对其进行取对数 $$log p(d_{obs}|m)=-\\frac{n}{2} log(2\\pi) - \\frac{1}{2} log(|C_{obs}|) - \\frac{\\Phi(m)}{2}\\tag{7}$$ 2.1.5 Propose a model (提出一个新模型) (1)修改$V_s$(泰森核) (2)修改深度h(泰森核) (3)修改地壳$V_{P}/V_{S}$ (4)修改噪声参数$(r,\\sigma)$ (5)修改维度(增加层数) (6)修改维度(减少层数) 除了(4)以外的每种方法都会改变速度-深度($V_{S}-h$)结构。 对于(1)和(2)从当前模型中随机挑选一个泰森核。对于(1)根据$V_{S}$的建议分布更改泰森核的$V_{S}$，因此，从这个正态分布(以零为中心)中抽取一个样本，并将其添加到泰森核当前的$V_{S}$值中。对于(2)，从深度($h$)建议分布中抽取一个样本，并将其添加到泰森核深度($h$)坐标中。 对于(3)，如果不是常数，从$V_{P}/V_{S}$建议分布中抽取一个样本，并将其添加到当前模型的$V_{P}/V_{S}$值中。 对于(4)，从一个目标(𝑟或𝜎)中选择一个随机噪声参数。如果这个参数不是常数，则根据前面的过程和它自己的建议分布进行修改。𝐶𝑒对面波频散的假设是基于指数定律的。对于接收函数，只有当用户想对𝑟求倒数时，才假定指数定律。如果𝑟由一个常数给出，则自动考虑高斯相关定律。 对于(5)和(6)，建议分布是相同的。 对于(5)，一个随机的深度值将从均匀的深度先验分布中提取，在那里一个新的Voronoi核将会诞生。该核的新速度将由当前模型在绘制深度处的速度计算，并经过建议分布的修改。 对于(6)，从当前模型的泰森核集合中随机选取一个核进行剔除。在这里，建议分布只与接受概率的计算有关，与模型的实际修改无关 对于这六种修改的方法 建议分布的初始宽度 作为BayHunter的一个特征 2.1.6 Accept a model (接受一个模型) 在提出一个模型之后，需要将其与当前模型进行比较。因此，计算接受概率𝛼。如果所提模型的任何参数不在其先验分布范围内，则接受概率降为零，模型将自动被拒绝。只有当模型参数的当前值非常接近先验极限或其建议分布宽度非常大时，该模型参数才能位于先验之外。通过设置𝛼= 0，强制建议模型(proposal model)被拒绝的进一步标准: 层厚小于$thick_{min}$ 低速/高速区域不满足用户定义的约束 $$\\alpha = prior ratio \\times likelihood ratio \\times proposal ratio \\times Jacobian$$ $$\\alpha(m^{’}|m) = \\frac{p(m^{’})}{p(m)} \\times \\frac{p(d_{obs}|m^{’})}{p(d_{obs}|m)} \\times \\frac{q(m|m^{’})}{q(m^{’}|m)} \\times |J| $$ (1) Voronoi nucleus position, VP/VS , and covariance matrix (2","date":"2022-12-03","objectID":"/posts/2022-12-03-bayhunter/2022-12-03-bayhunter-manual-zh/:4:1","tags":["draft"],"title":"BayHunter中文手册","uri":"/posts/2022-12-03-bayhunter/2022-12-03-bayhunter-manual-zh/"},{"categories":["draft"],"content":"2.2 The Saving and Plotting modules Outlier detection Final posterior distribution Plotting methods ","date":"2022-12-03","objectID":"/posts/2022-12-03-bayhunter/2022-12-03-bayhunter-manual-zh/:4:2","tags":["draft"],"title":"BayHunter中文手册","uri":"/posts/2022-12-03-bayhunter/2022-12-03-bayhunter-manual-zh/"},{"categories":["draft"],"content":"2.3 The BayWatch module ","date":"2022-12-03","objectID":"/posts/2022-12-03-bayhunter/2022-12-03-bayhunter-manual-zh/:4:3","tags":["draft"],"title":"BayHunter中文手册","uri":"/posts/2022-12-03-bayhunter/2022-12-03-bayhunter-manual-zh/"},{"categories":["draft"],"content":"三、Tutorial ","date":"2022-12-03","objectID":"/posts/2022-12-03-bayhunter/2022-12-03-bayhunter-manual-zh/:5:0","tags":["draft"],"title":"BayHunter中文手册","uri":"/posts/2022-12-03-bayhunter/2022-12-03-bayhunter-manual-zh/"},{"categories":["draft"],"content":"Requirements and installation ","date":"2022-12-03","objectID":"/posts/2022-12-03-bayhunter/2022-12-03-bayhunter-manual-zh/:5:1","tags":["draft"],"title":"BayHunter中文手册","uri":"/posts/2022-12-03-bayhunter/2022-12-03-bayhunter-manual-zh/"},{"categories":["draft"],"content":"Setting up and running and inversion Setting up the targets Setting up parameters ","date":"2022-12-03","objectID":"/posts/2022-12-03-bayhunter/2022-12-03-bayhunter-manual-zh/:5:2","tags":["draft"],"title":"BayHunter中文手册","uri":"/posts/2022-12-03-bayhunter/2022-12-03-bayhunter-manual-zh/"},{"categories":["draft"],"content":"Testing with synthetic data ","date":"2022-12-03","objectID":"/posts/2022-12-03-bayhunter/2022-12-03-bayhunter-manual-zh/:5:3","tags":["draft"],"title":"BayHunter中文手册","uri":"/posts/2022-12-03-bayhunter/2022-12-03-bayhunter-manual-zh/"},{"categories":["draft"],"content":"四、References ","date":"2022-12-03","objectID":"/posts/2022-12-03-bayhunter/2022-12-03-bayhunter-manual-zh/:6:0","tags":["draft"],"title":"BayHunter中文手册","uri":"/posts/2022-12-03-bayhunter/2022-12-03-bayhunter-manual-zh/"},{"categories":["draft"],"content":"Inversion example ","date":"2022-12-03","objectID":"/posts/2022-12-03-bayhunter/2022-12-03-bayhunter-manual-zh/:6:1","tags":["draft"],"title":"BayHunter中文手册","uri":"/posts/2022-12-03-bayhunter/2022-12-03-bayhunter-manual-zh/"},{"categories":["draft"],"content":"Estimation of $r_{RF}$ ","date":"2022-12-03","objectID":"/posts/2022-12-03-bayhunter/2022-12-03-bayhunter-manual-zh/:6:2","tags":["draft"],"title":"BayHunter中文手册","uri":"/posts/2022-12-03-bayhunter/2022-12-03-bayhunter-manual-zh/"},{"categories":["draft"],"content":"五、Appendix ","date":"2022-12-03","objectID":"/posts/2022-12-03-bayhunter/2022-12-03-bayhunter-manual-zh/:7:0","tags":["draft"],"title":"BayHunter中文手册","uri":"/posts/2022-12-03-bayhunter/2022-12-03-bayhunter-manual-zh/"},{"categories":["draft"],"content":"六、FAQs","date":"2022-12-03","objectID":"/posts/2022-12-03-bayhunter/2022-12-03-bayhunter-manual-zh/:8:0","tags":["draft"],"title":"BayHunter中文手册","uri":"/posts/2022-12-03-bayhunter/2022-12-03-bayhunter-manual-zh/"},{"categories":["draft"],"content":" 数据结构(Data Structure)是计算机中存储、组织数据的方式。 ","date":"2022-10-16","objectID":"/posts/2022-10-16-learning-data-structure/:0:0","tags":["draft"],"title":"数据结构与算法笔记","uri":"/posts/2022-10-16-learning-data-structure/"},{"categories":["draft"],"content":"EGFAnalysisTimeFreq频散(分析)软件手册 本套基于matlab的GUI软件用于从源自背景噪声的面波经验格林函数(EGF)或者互相关函数中提取群/相速度频散曲线。频散分析基于图像分析技术，该技术能在相(群)速度-周期图像中自动追踪频散曲线。 ","date":"2022-05-27","objectID":"/posts/2022-05-27-egfanalysistimefreq-manual-chinese/:1:0","tags":["draft"],"title":"EGFAnalysisTimeFreq使用手册","uri":"/posts/2022-05-27-egfanalysistimefreq-manual-chinese/"},{"categories":["draft"],"content":"1. 绘图面板 ","date":"2022-05-27","objectID":"/posts/2022-05-27-egfanalysistimefreq-manual-chinese/:1:1","tags":["draft"],"title":"EGFAnalysisTimeFreq使用手册","uri":"/posts/2022-05-27-egfanalysistimefreq-manual-chinese/"},{"categories":["draft"],"content":"2. 频散分析面板 2.1 半自动频散处理 Step1 : Step 1.1 : Step 1.2 : Step 1.3 : Step2 : Step3 : Step 3.1 : Step 3.2 : Step4 : Step 4.1 : Step 4.2 : Step 4.3 : Step5 : Step 5.1 : Step 5.2 : 2.2 自动分散分析 2.3 单个EGF/CF频散处理","date":"2022-05-27","objectID":"/posts/2022-05-27-egfanalysistimefreq-manual-chinese/:1:2","tags":["draft"],"title":"EGFAnalysisTimeFreq使用手册","uri":"/posts/2022-05-27-egfanalysistimefreq-manual-chinese/"},{"categories":["draft"],"content":"Crustal structure of Chuan-Dian region derived from gravity data and its tectonic implications 使用 style 修改字体字号 WORD中常用的一号宋体标题 ","date":"2022-03-15","objectID":"/posts/2022-03-15-reading-papers/:0:0","tags":["draft"],"title":"2022 03 15 Reading Papers","uri":"/posts/2022-03-15-reading-papers/"},{"categories":["draft"],"content":"WORD中常用的二号宋体标题 ","date":"2022-03-15","objectID":"/posts/2022-03-15-reading-papers/:1:0","tags":["draft"],"title":"2022 03 15 Reading Papers","uri":"/posts/2022-03-15-reading-papers/"},{"categories":["draft"],"content":"WORD中常用的三号宋体标题 Word 中常用的四号正文楷体 ","date":"2022-03-15","objectID":"/posts/2022-03-15-reading-papers/:1:1","tags":["draft"],"title":"2022 03 15 Reading Papers","uri":"/posts/2022-03-15-reading-papers/"},{"categories":["draft"],"content":"1、","date":"2022-03-10","objectID":"/posts/2022-03-18-learn-html/:0:1","tags":["draft"],"title":"HTML/CSS自学笔记","uri":"/posts/2022-03-18-learn-html/"},{"categories":["draft"],"content":"1.博客源文件与静态部署文件的区别 博客源文件： 本地位置 (base) ╭─ucaslilong@Long-Mac ~/Documents/myblog ‹master●› ╰─$pwd /Users/ucaslilong/Documents/myblog (base) ╭─ucaslilong@Long-Mac ~/Documents/myblog ‹master●› ╰─$ tree -L 1 . ├── archetypes ├── blogpirture ├── config.toml ├── content ├── data ├── layouts ├── public ├── resources ├── static └── themes 9 directories, 1 file Github位置 https://github.com/cuglilong/myblog 博客静态网站文件: 本地位置 /Users/ucaslilong/Documents/myblog/public Github位置 https://github.com/cuglilong/cuglilong.github.io 2.日常操作 写博客 (base) ╭─ucaslilong@Long-Mac ~/Documents/myblog ‹master●› ╰─$ ls archetypes config.toml data public static blogpirture content layouts resources themes (base) ╭─ucaslilong@Long-Mac ~/Documents/myblog ‹master●› ╰─$ pwd /Users/ucaslilong/Documents/myblog (base) ╭─ucaslilong@Long-Mac ~/Documents/myblog ‹master●› ╰─$ hugo new posts/2022-03-10-example-blog.md Content \"/Users/ucaslilong/Documents/myblog/content/posts/2022-03-10-example-blog.md\" created (base) ╭─ucaslilong@Long-Mac ~/Documents/myblog ‹master●› ╰─$ code content/posts/2022-03-10-example-blog.md 发布博客 (base) ╭─ucaslilong@Long-Mac ~/Documents/myblog ‹master●› ╰─$ pwd /Users/ucaslilong/Documents/myblog (base) ╭─ucaslilong@Long-Mac ~/Documents/myblog ‹master●› ╰─$ hugo --theme=FixIt --buildDrafts --baseUrl=\"https://cuglilong.github.io/\" Start building sites … hugo v0.93.2+extended darwin/amd64 BuildDate=unknown | ZH-CN -------------------+-------- Pages | 43 Paginator pages | 1 Non-page files | 0 Static files | 86 Processed images | 0 Aliases | 12 Sitemaps | 1 Cleaned | 0 Total in 201 ms (base) ╭─ucaslilong@Long-Mac ~/Documents/myblog ‹master●› ╰─$ cd public (base) ╭─ucaslilong@Long-Mac ~/Documents/myblog/public ‹master●› ╰─$ git remote rm origin (base) ╭─ucaslilong@Long-Mac ~/Documents/myblog/public ‹master●› ╰─$ git remote add origin git@github.com:cuglilong/cuglilong.github.io.git (base) ╭─ucaslilong@Long-Mac ~/Documents/myblog/public ‹master●› ╰─$ git add . (base) ╭─ucaslilong@Long-Mac ~/Documents/myblog/public ‹master●› ╰─$ git commit -m \"add example blog\" [master ef712db] add example blog 17 files changed, 496 insertions(+), 66 deletions(-) create mode 100644 posts/2022-03-10-about-blog/index.html create mode 100644 posts/2022-03-10-example-blog/index.html (base) ╭─ucaslilong@Long-Mac ~/Documents/myblog/public ‹master› ╰─$ git push -u origin master Enumerating objects: 51, done. Counting objects: 100% (51/51), done. Delta compression using up to 8 threads Compressing objects: 100% (25/25), done. Writing objects: 100% (29/29), 3.69 KiB | 1.23 MiB/s, done. Total 29 (delta 20), reused 0 (delta 0), pack-reused 0 remote: Resolving deltas: 100% (20/20), completed with 16 local objects. To github.com:cuglilong/cuglilong.github.io.git 447653b..ef712db master -\u003e master Branch 'master' set up to track remote branch 'master' from 'origin'. 备份博客源文件 (base) ╭─ucaslilong@Long-Mac ~/Documents/myblog/public ‹master› ╰─$ pwd /Users/ucaslilong/Documents/myblog/public (base) ╭─ucaslilong@Long-Mac ~/Documents/myblog/public ‹master› ╰─$ cd .. (base) ╭─ucaslilong@Long-Mac ~/Documents/myblog ‹master●› ╰─$ ls archetypes config.toml data public static blogpirture content layouts resources themes (base) ╭─ucaslilong@Long-Mac ~/Documents/myblog ‹master●› ╰─$ git remote rm origin (base) ╭─ucaslilong@Long-Mac ~/Documents/myblog ‹master●› ╰─$ git remote add origin git@github.com:cuglilong/myblog.git (base) ╭─ucaslilong@Long-Mac ~/Documents/myblog ‹master●› ╰─$ git add . (base) ╭─ucaslilong@Long-Mac ~/Documents/myblog ‹master●› ╰─$ git commit -m \"upload blog source\" [master 5f4305b] upload blog source 2 files changed, 116 insertions(+), 2 deletions(-) create mode 100644 content/posts/2022-03-10-about-blog.md rename content/posts/{2022-03-10-learn-html.md =\u003e 2022-03-10-example-blog.md} (88%) (base) ╭─ucaslilong@Long-Mac ~/Documents/myblog ‹master› ╰─$ git push -u origin master Enumerating objects: 9, done. Counting objects: 100% (9/9), done. Delta compression using up to 8 threads Compr","date":"2022-03-10","objectID":"/posts/2022-03-10-about-blog/:0:0","tags":["draft"],"title":"博客部署与博客源文件备份的几个问题","uri":"/posts/2022-03-10-about-blog/"},{"categories":null,"content":"This is a blog about my first trip to Myanmar, and it will show something about the field work and my Myanmar friends. ","date":"2019-03-01","objectID":"/posts/2019-03-01-myanmar-field-work/:0:0","tags":["myanmar"],"title":"Myanmar Field Trip（to be continue ...)","uri":"/posts/2019-03-01-myanmar-field-work/"},{"categories":null,"content":"1.My Myanmar friends ","date":"2019-03-01","objectID":"/posts/2019-03-01-myanmar-field-work/:1:0","tags":["myanmar"],"title":"Myanmar Field Trip（to be continue ...)","uri":"/posts/2019-03-01-myanmar-field-work/"},{"categories":null,"content":"本文为方洪健、姚华建DSurTomo英文用户手册翻译，仅供个人学习使用，原文及程序可从方洪健Github主页下载 ","date":"2018-09-20","objectID":"/posts/2018-09-20-translation-of-dsurftomo-manual/:0:0","tags":["地震程序"],"title":"DSurfTomo（V1.3)用户手册","uri":"/posts/2018-09-20-translation-of-dsurftomo-manual/"},{"categories":null,"content":"1 描述 DSurfTomo 是面波反演程序，它能从面波频散数据直接反演获得3D横波速度而不需要构建相速度或群速度分布图的中间步骤。程序使用了快速推进算法（FMM）计算面波每个周期源和接受台站之间的面波旅行时和射线路径，这就避免了面波层析成像中常使用的但对于复杂介质不合适的（面波）大圆弧传播假定。方法详细描述请参考方洪建2015年GJI文章。 ","date":"2018-09-20","objectID":"/posts/2018-09-20-translation-of-dsurftomo-manual/:1:0","tags":["地震程序"],"title":"DSurfTomo（V1.3)用户手册","uri":"/posts/2018-09-20-translation-of-dsurftomo-manual/"},{"categories":null,"content":"2 程序安装 此程序在CentOS、Debian、Ubuntu及MacOS平台上基于gfortran/ifort编译器测试成功。详细步骤如下： 1.新建文件夹存放DSurfTomo源码以及实例，命令如下： mkdir DSurfTomo 2.从Github上下载源码，命令如下： cd DSurfTomo git clone https://github.com/HongjianFang/DSurfTomo 3.安装，命令如下： ./configure or python2 configure 成功编译后，可执行文件将会再/bin目录下生成。 ","date":"2018-09-20","objectID":"/posts/2018-09-20-translation-of-dsurftomo-manual/:2:0","tags":["地震程序"],"title":"DSurfTomo（V1.3)用户手册","uri":"/posts/2018-09-20-translation-of-dsurftomo-manual/"},{"categories":null,"content":"3 数据准备(‘SurfTomo.dat’) 频散数据格式如下： #25.1 121.5 1 2 0 #(源)纬度 经度 周期索引？ 波类型（2：瑞雷波 1：勒夫波) 速度类型（0：相速度 1：群速度) 25.1 121.4 0.7990 (接收台站)纬度 经度 相速度/群速度（面波频散计算） ‘#‘号行表示源，分别是源纬度、源经度、周期索引（整数）、波类型和速度类型（后面解释） 每个源后是接收台站数据：前两行是接收台站纬度和经度，第三行为相速度或群速度（面波频散计算？） 周期索引(整数) ：参数文件DSurrfTomo.in(后面解释)中列出的周期矢量索引 波类型 ：2表示瑞雷波，1表示勒夫波 速度类型 ：0表示相速度，1表示群速度 (在数据集例子中，我在script目录下写了一个Python脚本ExtractData.py来从频散数据文件中提取数据 （？）。运行python ExtractData \u003e surfdataTB.dat 来准备此例子中的数据。但是你也可以使用任何方法 （？），只要你所准备的数据格式正确。) ","date":"2018-09-20","objectID":"/posts/2018-09-20-translation-of-dsurftomo-manual/:3:0","tags":["地震程序"],"title":"DSurfTomo（V1.3)用户手册","uri":"/posts/2018-09-20-translation-of-dsurftomo-manual/"},{"categories":null,"content":"4 初始模型（MOD) 初始模型文件名必须是 MOD ，其内容如下： 0.0 0.2 0.4 0.6 0.8 1.1 1.4 1.8 2.5 0.900 0.900 0.900 0.900 0.900 0.900 0.900 0.900 0.900 0.900 0.900 0.900 0.900 0.900 0.900 0.900 0.900 0.900 0.900 0.900 0.900 0.900 0.900 0.900 0.900 0.900 0.900 0.900 0.900 0.900 0.900 0.900\\ 0.900 0.900 0.900 0.900 ...... 第一行为网格点在垂直方向上的位置(km). 接着为横波速度值，其顺序为纬度、经度然后深度 ？ 每行表示不同纬度、同一经度、确定深度的横波速度，后面就是下一经度和深度。 在三维初始速度模型的情况下，在这个文件中就包含边界值。初始点为西北角。 (你可以使用 scripts 目录下的 GenerateIniMOD.py 脚本来产生一个简单的初始模型（需要一些简单的修改），运行 python GenerateIniMOD.py or python2 GenerateIniMOD.py 。对于三维初始模型，记住按照正确的顺序**?**) ","date":"2018-09-20","objectID":"/posts/2018-09-20-translation-of-dsurftomo-manual/:4:0","tags":["地震程序"],"title":"DSurfTomo（V1.3)用户手册","uri":"/posts/2018-09-20-translation-of-dsurftomo-manual/"},{"categories":null,"content":"5 反演输入文件(DSurfTomo.in) cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc c INPUT PARAMETERS cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc surfdata.dat c: data file 18 18 9 c: nx ny nz (grid number in lat lon and depth direction) 25.2 121.35 c: goxd gozd (upper left point,[lat,lon]) 0.015 0.017 c: dvxd dvzd (grid interval in lat and lon direction) 20 c: nsrc*maxf 4.0 0.0 c: weight damp 3 c: nsublayer (numbers of sublayers for each grid interval:grid --\u003e layer) 0.5 2.8 c: minimum velocity, maximum velocity 10 c: maxiter (iteration number) 0.1 c: sparsity fraction 26 c: kmaxRc (followed by periods) 0.5 0.6 0.7 0.8 0.9 1.0 1.1 1.2 1.3 1.4 1.5 1.6 1.7 1.8 1.9 2.0 2.1 2.2 2.3 2.4 2.5 2.6 2.7 2.8 2.9 3.0 0 c: kmaxRg 0 c: kmaxLc 0 c: kmaxLg 1 c: synthetic flag(0:real data,1:synthetic) 0.02 c: noiselevel 2.5 c: threshold 该文件（参数）某种程度上是不言自明的，然而跟进一步的解释如下： 第六行：初始点的经度和纬度，注意纬度方向为从北到南，经度方向从西到东。我（作者）总是画出所有的源点和接收点来确定这个初始点以保证反演区域包括全部源点和接收点，否则程序出错。 第七行：纬度和经度的网格间距。 确保所有的源点和接收点都在区域 *goxd-(nx-3)dvxd~goxd 和 *gozd~gozd+(ny-3)dvzd，否则程序将会报错并停止运行。 第八行：源点和接收点最大数 第九行： “weight” 是平衡数据拟合项和光滑正则化项的参数，选择一个合适的参数是有一定的技巧的，因为L曲线法并不总有效。以我（作者）的经验，一个合适的\"weight\"参数每次迭代可以获得合理的速度变化。在开始的几次迭代过程中，速度变化能够达到0.4。如果速度变化过大，表明你选择的\"weight\"参数太小，反之亦然。通常来说，一些试验就足够能选择一个好的\"weight\"参数。在最后几次迭代时，速度变化将会减小，因为反演开始收敛，否则程序将会报错并产生一些垃圾信息，如\"no roots can be found…\"。 “damp” 是 ’lsar’ 的输入参数，它控制反演参数的振幅。 第十行： ‘sublayers’ 表示为计算深度核你想设置的从网格转换到层的子层数，我（作者）一般设置为3。 第十一行：最小和最大速度是研究区域的先验信息，如果你没有这个信息可以设置一个大的网格间距，它对于最终结果不会有太大影响。 第十二行：反演迭代次数，一般来说10次足够。 稀疏分数参数表明敏感度矩阵的稀疏成都，对于大多数情况2~10%足够。 KmaxRg,kmaxRc,kmaxLc,KmaxLg 分别为：瑞雷波相速度的周期数、瑞雷波群速度的周期数、勒夫波相速度的周期数和勒夫波群速的周期数。注意如果周期数为0，就没有必要在周期数下写出周期，例如，kmaxRg。 “synthetic flag” : 0 表示反演使用的是实际数据，1 表示反演使用的是合成数据；当标签为 1 时(flag = 1)就需要一个名为 MOD.true 的文件，否则程序将会停止运行。 (你也可是使用 /scripts目录下的 GenerateTrueMOD.py 脚本来生成 MOD.true 文件，脚本是用于检测板的，为控制 ‘checkers’ 的数目和大小需要做一些修改) python2 GenerateTrueMOD.py “noise level” 表明加入到合成数据中的高斯噪声，例如，0.02表示加入了均值为0，标准差为2%的随机高斯噪声。 最后一行的 ’threshold’（阈值） 控制计算的权重以避免离群值对最终结果的影响，weights 有如下表达式： $$weights=\\frac{1.0}{1+0.05\\times{exp(x^2\\times{threshold})}} $$ 其中，x 是残差。下图为对于两个不同 threshold 值对应的 weight 值，对于 threshold=0.5 ，残差大于4s的 weight 减小到0. 在特定目录下准备好这三个文件后,可以在同一目录下运行此程序: ../src/DSurfTomo DSurfTomo.in ","date":"2018-09-20","objectID":"/posts/2018-09-20-translation-of-dsurftomo-manual/:5:0","tags":["地震程序"],"title":"DSurfTomo（V1.3)用户手册","uri":"/posts/2018-09-20-translation-of-dsurftomo-manual/"},{"categories":null,"content":"6 输出文件 最终速度模型(DSurfTomo.inMeasure.dat): 第一列:经度 第二列:纬度 第三列:深度 第四列:横波速度 我使用 /scripts 目录中的 plotslice.gmt 以快速检验结果: csh plotslice.gmt DSurfTomo.inMeasure.dat depth1 depth2 depth3 depth4 其中 depth[1234] 是垂直网格的一些深度. 你可以插值到你想要的深度,并使用你自己的脚本绘图. 最终模型的射线分布(raypath.out): #射线路径段的序号 纬度 经度 … 每次迭代的速度模型(DSurfTomo.inMeasure.dat.iter): 与最终速度模型(DSurfTomo.inMeasure.dat)的数据格式一致,这些文件可以用于检测运行中间结果. 最初/最终迭代残差(residual.dat*): 数据格式如下: Distance(距离) ForwardT ObserveT weightedForwardT weightedObseverT weight(权重) … ","date":"2018-09-20","objectID":"/posts/2018-09-20-translation-of-dsurftomo-manual/:6:0","tags":["地震程序"],"title":"DSurfTomo（V1.3)用户手册","uri":"/posts/2018-09-20-translation-of-dsurftomo-manual/"},{"categories":null,"content":"参考文献 Fang,H.,Yao,H.,Zhang,H.,Huang,Y.C.,\u0026 van der Hilst,R.D.(2015).Direct inversion of surface wave dispersion for three-dimensional shallow crustal structure based on ray tracing:methodology and application. Geophysical Journal International,201(3),1251-1263.PDF Rawlinson,N.\u0026 Sambridge,M.,2004. Wave front evolution in strongly heterogeneous layered media using the fast marching method, Geophys.J.Int.,156(3),631-647.PDF ","date":"2018-09-20","objectID":"/posts/2018-09-20-translation-of-dsurftomo-manual/:7:0","tags":["地震程序"],"title":"DSurfTomo（V1.3)用户手册","uri":"/posts/2018-09-20-translation-of-dsurftomo-manual/"},{"categories":null,"content":"本文转载自Linux中国，主要关于Makefile的工作原理 makefile能更有效的运行和编译你的程序 准备材料： Linux系统 安装make ","date":"2018-09-18","objectID":"/posts/2018-09-18-makefile/:0:0","tags":["makefile"],"title":"Makefile工作原理","uri":"/posts/2018-09-18-makefile/"},{"categories":null,"content":"本文主要记录在使用Linux（Ubuntu）系统时所遇到的问题及解决方法,主要参考阿里云 ","date":"2018-09-08","objectID":"/posts/2018-09-08-linux-problem/:0:0","tags":["Linux"],"title":"Linux（Ubuntu）系统操作常见问题汇总","uri":"/posts/2018-09-08-linux-problem/"},{"categories":null,"content":"1 输入sudo命令，例如：sudo apt-get update，出现如下报错 Linux ** is not in the sudoers file.This incident will be reported. ","date":"2018-09-08","objectID":"/posts/2018-09-08-linux-problem/:1:0","tags":["Linux"],"title":"Linux（Ubuntu）系统操作常见问题汇总","uri":"/posts/2018-09-08-linux-problem/"},{"categories":null,"content":"解决方法： ","date":"2018-09-08","objectID":"/posts/2018-09-08-linux-problem/:1:1","tags":["Linux"],"title":"Linux（Ubuntu）系统操作常见问题汇总","uri":"/posts/2018-09-08-linux-problem/"},{"categories":null,"content":"1.1 切换到管理员用户 su root ","date":"2018-09-08","objectID":"/posts/2018-09-08-linux-problem/:1:2","tags":["Linux"],"title":"Linux（Ubuntu）系统操作常见问题汇总","uri":"/posts/2018-09-08-linux-problem/"},{"categories":null,"content":"1.2 修改sudoers文件权限 chmod 777 /etc/sudoers ","date":"2018-09-08","objectID":"/posts/2018-09-08-linux-problem/:1:3","tags":["Linux"],"title":"Linux（Ubuntu）系统操作常见问题汇总","uri":"/posts/2018-09-08-linux-problem/"},{"categories":null,"content":"1.3 修改sudoers文件 vim /etc/sudoers ","date":"2018-09-08","objectID":"/posts/2018-09-08-linux-problem/:1:4","tags":["Linux"],"title":"Linux（Ubuntu）系统操作常见问题汇总","uri":"/posts/2018-09-08-linux-problem/"},{"categories":null,"content":"在 root ALL=(ALL:ALL)ALL 下面添加一行，yourName 就是你的用户名：yourName ALL=(ALL)ALL ","date":"2018-09-08","objectID":"/posts/2018-09-08-linux-problem/:1:5","tags":["Linux"],"title":"Linux（Ubuntu）系统操作常见问题汇总","uri":"/posts/2018-09-08-linux-problem/"},{"categories":null,"content":"然后退出并保存 1.4 改回文件权限 chmod 440 /etc/sudoers ","date":"2018-09-08","objectID":"/posts/2018-09-08-linux-problem/:1:6","tags":["Linux"],"title":"Linux（Ubuntu）系统操作常见问题汇总","uri":"/posts/2018-09-08-linux-problem/"},{"categories":null,"content":"1.5 测试是否解决 sudo apt-get update ","date":"2018-09-08","objectID":"/posts/2018-09-08-linux-problem/:1:7","tags":["Linux"],"title":"Linux（Ubuntu）系统操作常见问题汇总","uri":"/posts/2018-09-08-linux-problem/"},{"categories":null,"content":"本文主要记录安装Linux（Ubuntu）系统时所遇到的各种奇怪问题以及我所使用的解决方法，此篇将持续更新记录 ","date":"2018-09-06","objectID":"/posts/2018-09-06-install-linux/:0:0","tags":["Linux"],"title":"Win系统下安装Linux系统所遇到的问题及解决方法","uri":"/posts/2018-09-06-install-linux/"},{"categories":null,"content":"1 引导文件损坏（即进不去系统） ","date":"2018-09-06","objectID":"/posts/2018-09-06-install-linux/:1:0","tags":["Linux"],"title":"Win系统下安装Linux系统所遇到的问题及解决方法","uri":"/posts/2018-09-06-install-linux/"},{"categories":null,"content":"1.1 Windos引导文件损坏 我所遇到的情况是：格式化Linux系统盘（准备重装Linux系统）后重启直接进出现 grub \u003e 我所采用的解决办法是： 1 首先安装好Ubuntu（Ubuntu16.04）系统 2 重启后直接进入Ubuntu系统（自动进入Ubuntu，此时无选择Ubuntu和Windows界面） 3 在Ubuntu系统中修复引导文件（grub），主要参考KII_2博文 3.1 执行如下命令 sudo grub-install /dev/sda sudo update-grub 3.2 重启即可进入系统选择界面，此时即可进入Windows系统 ","date":"2018-09-06","objectID":"/posts/2018-09-06-install-linux/:1:1","tags":["Linux"],"title":"Win系统下安装Linux系统所遇到的问题及解决方法","uri":"/posts/2018-09-06-install-linux/"},{"categories":null,"content":"要求：给定首尾两点的经纬度坐标，要求台站间距为10km，如何确定台站数目以及各台站点经纬度。 ","date":"2018-07-10","objectID":"/posts/2018-07-10-select-station/:0:1","tags":["野外准备工作"],"title":"野外台站选点","uri":"/posts/2018-07-10-select-station/"},{"categories":null,"content":"工具：Google Earth、计算台站经纬度小程序 ","date":"2018-07-10","objectID":"/posts/2018-07-10-select-station/:0:2","tags":["野外准备工作"],"title":"野外台站选点","uri":"/posts/2018-07-10-select-station/"},{"categories":null,"content":"具体步骤： 将A、B两点投影到Google Earth上； 利用Google Earth的测量尺功能，测量A、B两点之间的距离； 计算两点之间共有多少个间距，结果取整（不足1按1算），则总共台站数+1； ","date":"2018-07-10","objectID":"/posts/2018-07-10-select-station/:0:3","tags":["野外准备工作"],"title":"野外台站选点","uri":"/posts/2018-07-10-select-station/"},{"categories":null,"content":"1.什么是机器学习 ","date":"2018-05-17","objectID":"/posts/2018-05-17-machine-learning/:1:0","tags":["机器学习"],"title":"机器学习基础知识","uri":"/posts/2018-05-17-machine-learning/"},{"categories":null,"content":"2.机器学习相关资料 ","date":"2018-05-17","objectID":"/posts/2018-05-17-machine-learning/:2:0","tags":["机器学习"],"title":"机器学习基础知识","uri":"/posts/2018-05-17-machine-learning/"},{"categories":null,"content":"3.机器学习基础 ","date":"2018-05-17","objectID":"/posts/2018-05-17-machine-learning/:3:0","tags":["机器学习"],"title":"机器学习基础知识","uri":"/posts/2018-05-17-machine-learning/"},{"categories":null,"content":"1.Git是什么 分布式版本控制工具 ","date":"2018-05-14","objectID":"/posts/2017-05-14-learn-git/:1:0","tags":["Git"],"title":"Git基本操作","uri":"/posts/2017-05-14-learn-git/"},{"categories":null,"content":"2.Git安装 ","date":"2018-05-14","objectID":"/posts/2017-05-14-learn-git/:2:0","tags":["Git"],"title":"Git基本操作","uri":"/posts/2017-05-14-learn-git/"},{"categories":null,"content":"3.Git基本操作 ","date":"2018-05-14","objectID":"/posts/2017-05-14-learn-git/:3:0","tags":["Git"],"title":"Git基本操作","uri":"/posts/2017-05-14-learn-git/"},{"categories":null,"content":"3.1 创建版本库 ","date":"2018-05-14","objectID":"/posts/2017-05-14-learn-git/:3:1","tags":["Git"],"title":"Git基本操作","uri":"/posts/2017-05-14-learn-git/"},{"categories":null,"content":"3.2 初始化版本库 ","date":"2018-05-14","objectID":"/posts/2017-05-14-learn-git/:3:2","tags":["Git"],"title":"Git基本操作","uri":"/posts/2017-05-14-learn-git/"},{"categories":null,"content":"3.3 提交文件到版本库 ","date":"2018-05-14","objectID":"/posts/2017-05-14-learn-git/:3:3","tags":["Git"],"title":"Git基本操作","uri":"/posts/2017-05-14-learn-git/"},{"categories":null,"content":"本文主要参考Hugo中文文档及浮世尘烟博文 ","date":"2018-05-09","objectID":"/posts/2018-05-09-building-blog/:0:0","tags":["hugo"],"title":"利用Hugo搭建博客并部署在Github上的方法","uri":"/posts/2018-05-09-building-blog/"},{"categories":null,"content":"1.搭建博客目的 主要为记录一些软件及平时科研学习笔记 ","date":"2018-05-09","objectID":"/posts/2018-05-09-building-blog/:1:0","tags":["hugo"],"title":"利用Hugo搭建博客并部署在Github上的方法","uri":"/posts/2018-05-09-building-blog/"},{"categories":null,"content":"2.准备工作 ","date":"2018-05-09","objectID":"/posts/2018-05-09-building-blog/:2:0","tags":["hugo"],"title":"利用Hugo搭建博客并部署在Github上的方法","uri":"/posts/2018-05-09-building-blog/"},{"categories":null,"content":"2.1 基础知识 Git基本操作（参考廖雪峰老师Git教程) Github网站基本了解 ","date":"2018-05-09","objectID":"/posts/2018-05-09-building-blog/:2:1","tags":["hugo"],"title":"利用Hugo搭建博客并部署在Github上的方法","uri":"/posts/2018-05-09-building-blog/"},{"categories":null,"content":"2.2 软件列表 Git Hugo Github账户申请 ","date":"2018-05-09","objectID":"/posts/2018-05-09-building-blog/:2:2","tags":["hugo"],"title":"利用Hugo搭建博客并部署在Github上的方法","uri":"/posts/2018-05-09-building-blog/"},{"categories":null,"content":"2.3 软件安装 1) Git软件的安装 Ubuntu系统 sudo apt-get install git Centos系统 sudo yum install git 2）Hugo软件的安装 在Hugo官网上下载 .tar.gz 包 解压可获得二进制包 tar -zxvf hugo_0.54.0_Linux-64bit.tar.gz 将解压出的二进制包 hugo 移动到/bin文件夹下 sudo mv hugo /bin 3）Github账户申请 ","date":"2018-05-09","objectID":"/posts/2018-05-09-building-blog/:2:3","tags":["hugo"],"title":"利用Hugo搭建博客并部署在Github上的方法","uri":"/posts/2018-05-09-building-blog/"},{"categories":null,"content":"3.生成静态博客 git ","date":"2018-05-09","objectID":"/posts/2018-05-09-building-blog/:3:0","tags":["hugo"],"title":"利用Hugo搭建博客并部署在Github上的方法","uri":"/posts/2018-05-09-building-blog/"},{"categories":null,"content":"4.部署在Github上 ","date":"2018-05-09","objectID":"/posts/2018-05-09-building-blog/:4:0","tags":["hugo"],"title":"利用Hugo搭建博客并部署在Github上的方法","uri":"/posts/2018-05-09-building-blog/"},{"categories":null,"content":"5.博客编写 hugo new post/blog.md hugo --theme=blackburn --buildDrafts --baseUrl=\"https://cuglilong.github.io/\" cd public git add . git commit -m \"add new blog\" git push origin master ","date":"2018-05-09","objectID":"/posts/2018-05-09-building-blog/:5:0","tags":["hugo"],"title":"利用Hugo搭建博客并部署在Github上的方法","uri":"/posts/2018-05-09-building-blog/"},{"categories":null,"content":"李龙的第一篇博客 ","date":"2018-05-08","objectID":"/posts/first/:0:0","tags":null,"title":"这是一篇测试博客","uri":"/posts/first/"},{"categories":null,"content":"关于博主 男，94年生，地质地球所在读博士生 ","date":"2018-05-08","objectID":"/about/:1:0","tags":null,"title":"About","uri":"/about/"},{"categories":null,"content":"教育经历 2017.9 ~ ：中国科学院地质与地球物理研究所，博士 2013.6 ~ 2017.6 : 中国地质大学（武汉），学士 ","date":"2018-05-08","objectID":"/about/:2:0","tags":null,"title":"About","uri":"/about/"},{"categories":null,"content":"工作经历 ","date":"2018-05-08","objectID":"/about/:3:0","tags":null,"title":"About","uri":"/about/"},{"categories":null,"content":"联系方式 E-mail : ucaslilong@gmail.com E-mail : cuglilong@163.com ","date":"2018-05-08","objectID":"/about/:4:0","tags":null,"title":"About","uri":"/about/"}]